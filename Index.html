<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zelvora ‚Äì Secure AI Coach</title>

  <style>
    :root {
      --bg: #f6f7fb;
      --primary: #0c2340;
      --accent: #1f7aff;
      --text: #111827;
      --muted: #6b7280;
      --radius: 22px;
      --pill: 999px;
    }

    body {
      margin: 0;
      padding: 20px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    .container {
      max-width: 820px;
      margin: auto;
    }

    .card {
      background: var(--primary);
      color: white;
      padding: 30px;
      border-radius: var(--radius);
      box-shadow: 0 12px 30px rgba(0,0,0,0.15);
    }

    h2 {
      margin-top: 0;
    }

    #chat {
      background: rgba(255,255,255,0.06);
      padding: 20px;
      border-radius: 16px;
      min-height: 200px;
      max-height: 420px;
      overflow-y: auto;
      margin-bottom: 18px;
      font-size: 14px;
    }

    .input-box {
      display: flex;
      gap: 10px;
      background: white;
      padding: 8px;
      border-radius: var(--pill);
    }

    input {
      flex: 1;
      border: none;
      outline: none;
      font-size: 14px;
      padding: 0 14px;
    }

    button {
      border: none;
      border-radius: var(--pill);
      padding: 10px 20px;
      font-weight: 600;
      cursor: pointer;
      background: var(--accent);
      color: white;
    }

    button:disabled {
      background: var(--muted);
      cursor: not-allowed;
    }

    .status {
      margin-top: 6px;
      font-size: 12px;
      opacity: 0.7;
      font-style: italic;
      display: none;
    }

    .user { color: #9ca3af; margin-bottom: 6px; }
    .ai { margin-bottom: 14px; }
    .system-ok { color: #10b981; }
    .system-bad { color: #ef4444; }
  </style>
</head>

<body>
  <div class="container">
    <div class="card">
      <h2>Zelvora AI Coach</h2>

      <div id="chat">
        <div class="system-ok"><b>System:</b> Initializing secure AI tunnel‚Ä¶</div>
      </div>

      <div class="input-box">
        <input id="input" placeholder="Ask about business, studies, or career‚Ä¶" />
        <button id="send">Send</button>
      </div>

      <div id="status" class="status">Zelvora is thinking‚Ä¶</div>
    </div>
  </div>

  <!-- ‚úÖ FIREBASE AI LOGIC (FREE TIER SAFE) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
    import { getAI, getGenerativeModel } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-ai.js";

    // üîπ REPLACE WITH YOUR REAL FIREBASE VALUES
    const firebaseConfig = {
      apiKey: "AIzaSy-XXXXXXXXXXXX",
      authDomain: "zelvora-global.firebaseapp.com",
      projectId: "zelvora-global",
      appId: "1:XXXXXXXX:web:XXXXXXXX"
    };

    const app = initializeApp(firebaseConfig);

    // üîê FORCE FREE GEMINI DEVELOPER API
    const ai = getAI(app, { backend: "google-ai" });

    const model = getGenerativeModel(ai, {
      model: "gemini-3-flash-preview"
    });

    const chat = document.getElementById("chat");
    const input = document.getElementById("input");
    const send = document.getElementById("send");
    const status = document.getElementById("status");

    function addMessage(html, cls = "") {
      const div = document.createElement("div");
      div.className = cls;
      div.innerHTML = html;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }

    async function sendMessage() {
      const text = input.value.trim();
      if (!text) return;

      addMessage(`<b>You:</b> ${text}`, "user");
      input.value = "";
      send.disabled = true;
      status.style.display = "block";

      try {
        const result = await model.generateContent(text);
        addMessage(`<b>Zelvora:</b> ${result.response.text()}`, "ai");
      } catch (e) {
        console.error(e);
        addMessage(`<b>System:</b> AI connection failed`, "system-bad");
      } finally {
        send.disabled = false;
        status.style.display = "none";
      }
    }

    send.onclick = sendMessage;
    input.addEventListener("keydown", e => {
      if (e.key === "Enter") sendMessage();
    });

    // üîç AUTO CONNECTION TEST (NO GUESSING)
    (async () => {
      try {
        const test = await model.generateContent("Reply only with CONNECTED");
        addMessage(`<b>System:</b> ${test.response.text()}`, "system-ok");
      } catch {
        addMessage(`<b>System:</b> AI NOT CONNECTED`, "system-bad");
      }
    })();
  </script>
</body>
</html>
